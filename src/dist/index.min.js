"use strict";var __awaiter=this&&this.__awaiter||function(t,u,l,a){return new(l=l||Promise)(function(e,n){function r(t){try{i(a.next(t))}catch(t){n(t)}}function o(t){try{i(a.throw(t))}catch(t){n(t)}}function i(t){t.done?e(t.value):function(e){return e instanceof l?e:new l(function(t){t(e)})}(t.value).then(r,o)}i((a=a.apply(t,u||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,i,u,t,l={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(u=2&e[0]?i.return:e[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(u=0<(u=l.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){l.label=e[1];break}if(6===e[0]&&l.label<u[1]){l.label=u[1],u=e;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(e);break}u[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};exports.__esModule=!0;var core=require("@actions/core"),github=require("@actions/github"),utils_1=require("./utils");function run(){return __awaiter(this,void 0,Promise,function(){var e,n,r,o,i,u,l,a,c,s,f;return __generator(this,function(t){try{e=core.getInput("token",{required:!0}),n=core.getInput("workflow",{required:!0}),r=core.getInput("branch"),o=utils_1.getOptionalInput("event"),core.getBooleanInput("wait"),void 0===(i=utils_1.getOptionalInput("repo"))&&(i=utils_1.getRepository()),u=utils_1.getOwnerAndRepo(i),l=u[0],a=u[1],core.info("Checking result of "+n+" from "+i+":"+r),c=github.getOctokit(e),f=s=null,c.rest.actions.listWorkflowRuns({owner:l,repo:a,workflow_id:n,branch:r,event:o,per_page:1}).then(function(t){var e,n,r,o,i=t.data;n=null===(e=i)||void 0===e?void 0:e.status,s=null!=n?n:null,o=null===(r=i)||void 0===r?void 0:r.conclusion,f=null!=o?o:null}),null!==s&&null!==f?(core.info("status: "+s),core.info("conclusion: "+f),core.setOutput("status",s),core.setOutput("conclusion",f)):utils_1.logWarning("Workflow run is missing")}catch(t){core.setFailed("Failed with error: "+t.message)}return[2]})})}run();
//# sourceMappingURL=index.min.js.map
